
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Shell Scripts &#8212; University Research Computing Facility Workshop</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Workshop Conclusion" href="conclusion.html" />
    <link rel="prev" title="Loop" href="loop.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">University Research Computing Facility Workshop</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    University Research Computing Facility Workshops
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  INTRODUCTORY SEQUENCE
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Linux
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="outline.html">
     Workshop Outline
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="introduction.html">
     What is Linux?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="shell.html">
     Shell Specifics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="file-system.html">
     Navigating Files and Directories
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="working_with_files_and_directories.html">
     Working With Files and Directories
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="file-permissions.html">
     File Permissions and Atrributes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="pipes.html">
     Pipes and Redirection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="loop.html">
     Loop
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Shell Scripts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="conclusion.html">
     Workshop Conclusion
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../intro_picotte/index.html">
   Research Computing on Picotte
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/introduction.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/accessing-picotte.html">
     Accessing the Picotte Cluster
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/picotte_structure.html">
     The structure of the Picotte Cluster
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/storage.html">
     Storage on Picotte
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/interactive.html">
     Running an interactive job on Picotte
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/file-transfer.html">
     Transferring files to and from Picotte
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/batch.html">
     Running a batch job
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/jupyter-hub.html">
     Jupyter Hub service to the Picotte Cluster
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  R
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../r_programming/00-index.html">
   Introduction to R
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/01-Introduction.html">
     Introduction to R
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/02-Basic-R.html">
     Basics of R
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/03-Data-Structures.html">
     Data Structures
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/04-Matrix.html">
     Vectors, Matrices, Lists and Data Frames
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/05-Control-Structure.html">
     Control Structure
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/06-Functions.html">
     Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/07-Parallel-Computing.html">
     Parallel Computing in R
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/08-Basic-Plotting.html">
     Basic plotting with R
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/09-Plotting-with-ggplot.html">
     Ploting with ggplot
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  PYTHON
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../python_programming/00-index.html">
   Introduction to Python Programming
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/01-intro.html">
     Python Fundamentals
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/02-numpy.html">
     Analyzing Patient Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/03-matplotlib.html">
     Visualizing Tabular Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/04-lists.html">
     Storing Multiple Values in Lists
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/05-loop.html">
     Repeating Actions with Loops
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/06-files.html">
     Analyzing Data from Multiple Files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/07-cond.html">
     Making Choices
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/08-func.html">
     Creating Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/09-errors.html">
     Errors and Exceptions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/10-defensive.html">
     Defensive Programming
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/11-debugging.html">
     Debugging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/12-cmdline.html">
     Command-Line Programs
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/intro_linux/utilities.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Shell Scripts</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="shell-scripts">
<h1>Shell Scripts<a class="headerlink" href="#shell-scripts" title="Permalink to this headline">#</a></h1>
<p>We are finally ready to see what makes the shell such a powerful programming
environment. We are going to take the commands we repeat frequently and save
them in files so that we can re-run all those operations again later by typing
a single command. For historical reasons, a bunch of commands saved in a file
is usually called a <strong>shell script</strong>, but make no mistake — these are
actually small programs.</p>
<p>Not only will writing shell scripts make your work faster, but also you won’t
have to retype the same commands over and over again. It will also make it more
accurate (fewer chances for typos) and more reproducible. If you come back to
your work later (or if someone else finds your work and wants to build on it),
you will be able to reproduce the same results simply by running your script,
rather than having to remember or retype a long list of commands.</p>
<div class="dropdown admonition">
<p class="admonition-title">1. Our first shell script</p>
<p>Let’s start by going back to <code class="docutils literal notranslate"><span class="pre">alkanes/</span></code> and creating a new file, <code class="docutils literal notranslate"><span class="pre">middle.sh</span></code>
which will become our shell script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> alkanes
nano middle.sh
</pre></div>
</div>
<p>The command <code class="docutils literal notranslate"><span class="pre">nano</span> <span class="pre">middle.sh</span></code> opens the file <code class="docutils literal notranslate"><span class="pre">middle.sh</span></code> within the text editor
‘nano’ (which runs within the shell). If the file does not exist, it will be
created. We can use the text editor to directly edit the file by inserting the
following line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">head</span> <span class="o">-</span><span class="n">n</span> <span class="mi">15</span> <span class="n">octane</span><span class="o">.</span><span class="n">pdb</span> <span class="o">|</span> <span class="n">tail</span> <span class="o">-</span><span class="n">n</span> <span class="mi">5</span>
</pre></div>
</div>
<p>This is a variation on the pipe we constructed earlier, which selects lines 11-15 of
the file <code class="docutils literal notranslate"><span class="pre">octane.pdb</span></code>. Remember, we are <em>not</em> running it as a command just yet;
we are only incorporating the commands in a file.</p>
<p>Then we save the file (<code class="docutils literal notranslate"><span class="pre">Ctrl-O</span></code> in nano) and exit the text editor (<code class="docutils literal notranslate"><span class="pre">Ctrl-X</span></code> in nano).
Check that the directory <code class="docutils literal notranslate"><span class="pre">alkanes</span></code> now contains a file called <code class="docutils literal notranslate"><span class="pre">middle.sh</span></code>.</p>
<p>Once we have saved the file,
we can ask the shell to execute the commands it contains.
Our shell is called <code class="docutils literal notranslate"><span class="pre">bash</span></code>, so we run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash middle.sh
</pre></div>
</div>
<p>Sure enough, our script’s output is exactly what we would get if we ran that
pipeline directly.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">2. Command line arguments</p>
<p>What if we want to select lines from an arbitrary file?
We could edit <code class="docutils literal notranslate"><span class="pre">middle.sh</span></code> each time to change the filename,
but that would probably take longer than typing the command out again
in the shell and executing it with a new file name.
Instead, let’s edit <code class="docutils literal notranslate"><span class="pre">middle.sh</span></code> and make it more versatile:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nano</span> <span class="n">middle</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Now, within “nano”, replace the text <code class="docutils literal notranslate"><span class="pre">octane.pdb</span></code> with the special variable called <code class="docutils literal notranslate"><span class="pre">$1</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">head</span> <span class="o">-</span><span class="n">n</span> <span class="mi">15</span> <span class="s2">&quot;$1&quot;</span> <span class="o">|</span> <span class="n">tail</span> <span class="o">-</span><span class="n">n</span> <span class="mi">5</span>
</pre></div>
</div>
<p>Inside a shell script,
<code class="docutils literal notranslate"><span class="pre">$1</span></code> means ‘the first filename (or other argument) on the command line’.
We can now run our script like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash middle.sh octane.pdb
</pre></div>
</div>
<p>or on a different file like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ bash middle.sh pentane.pdb
</pre></div>
</div>
<p>Currently, we need to edit <code class="docutils literal notranslate"><span class="pre">middle.sh</span></code> each time we want to adjust the range of
lines that is returned.
Let’s fix that by configuring our script to instead use three command-line arguments.
After the first command-line argument (<code class="docutils literal notranslate"><span class="pre">$1</span></code>), each additional argument that we
provide will be accessible via the special variables <code class="docutils literal notranslate"><span class="pre">$1</span></code>, <code class="docutils literal notranslate"><span class="pre">$2</span></code>, <code class="docutils literal notranslate"><span class="pre">$3</span></code>,
which refer to the first, second, third command-line arguments, respectively.</p>
<p>Knowing this, we can use additional arguments to define the range of lines to
be passed to <code class="docutils literal notranslate"><span class="pre">head</span></code> and <code class="docutils literal notranslate"><span class="pre">tail</span></code> respectively:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nano middle.sh
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">head</span> <span class="o">-</span><span class="n">n</span> <span class="s2">&quot;$2&quot;</span> <span class="s2">&quot;$1&quot;</span> <span class="o">|</span> <span class="n">tail</span> <span class="o">-</span><span class="n">n</span> <span class="s2">&quot;$3&quot;</span>
</pre></div>
</div>
<p>We can now run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash middle.sh pentane.pdb <span class="m">15</span> <span class="m">5</span>
</pre></div>
</div>
<p>By changing the arguments to our command, we can change our script’s
behaviour:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash middle.sh pentane.pdb <span class="m">20</span> <span class="m">5</span>
</pre></div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">3. Putting comments in the code</p>
<p>We can improve our script by adding some <strong>comments</strong> at the top:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nano middle.sh
</pre></div>
</div>
<div class="highlight-source notranslate"><div class="highlight"><pre><span></span># Select lines from the middle of a file.
# Usage: bash middle.sh filename end_line num_lines
head -n &quot;$2&quot; &quot;$1&quot; | tail -n &quot;$3&quot;
</pre></div>
</div>
<p>A comment starts with a <code class="docutils literal notranslate"><span class="pre">#</span></code> character and runs to the end of the line.
The computer ignores comments, but they’re invaluable for helping people (including your
future self) understand and use scripts. The only caveat is that each time you
modify the script, you should check that the comment is still accurate.
An explanation that sends the reader in the wrong direction is worse than none at all.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">4. Multiple command line arguments</p>
<p>What if we want to process many files in a single pipeline?
For example, if we want to sort our <code class="docutils literal notranslate"><span class="pre">.pdb</span></code> files by length, we would type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ wc -l *.pdb <span class="p">|</span> sort -n
</pre></div>
</div>
<p>because <code class="docutils literal notranslate"><span class="pre">wc</span> <span class="pre">-l</span></code> lists the number of lines in the files
(recall that <code class="docutils literal notranslate"><span class="pre">wc</span></code> stands for ‘word count’, adding the <code class="docutils literal notranslate"><span class="pre">-l</span></code> option means ‘count lines’ instead)
and <code class="docutils literal notranslate"><span class="pre">sort</span> <span class="pre">-n</span></code> sorts things numerically.
We could put this in a file,
but then it would only ever sort a list of <code class="docutils literal notranslate"><span class="pre">.pdb</span></code> files in the current directory.
If we want to be able to get a sorted list of other kinds of files,
we need a way to get all those names into the script.
We can’t use <code class="docutils literal notranslate"><span class="pre">$1</span></code>, <code class="docutils literal notranslate"><span class="pre">$2</span></code>, and so on
because we don’t know how many files there are.
Instead, we use the special variable <code class="docutils literal notranslate"><span class="pre">$&#64;</span></code>,
which means,
‘All of the command-line arguments to the shell script’.
We also should put <code class="docutils literal notranslate"><span class="pre">$&#64;</span></code> inside double-quotes
to handle the case of arguments containing spaces
(<code class="docutils literal notranslate"><span class="pre">&quot;$&#64;&quot;</span></code> is special syntax and is equivalent to <code class="docutils literal notranslate"><span class="pre">&quot;$1&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">&quot;$2&quot;</span></code> …).</p>
<p>Here’s an example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nano sorted.sh
</pre></div>
</div>
<div class="highlight-source notranslate"><div class="highlight"><pre><span></span># Sort files by their length.
# Usage: bash sorted.sh one_or_more_filenames
wc -l &quot;$@&quot; | sort -n
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash sorted.sh *.pdb ../creatures/*.dat
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">9 methane.pdb</span>
<span class="go">12 ethane.pdb</span>
<span class="go">15 propane.pdb</span>
<span class="go">20 cubane.pdb</span>
<span class="go">21 pentane.pdb</span>
<span class="go">30 octane.pdb</span>
<span class="go">163 ../creatures/basilisk.dat</span>
<span class="go">163 ../creatures/minotaur.dat</span>
<span class="go">163 ../creatures/unicorn.dat</span>
<span class="go">596 total</span>
</pre></div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">5. Challenge: List Unique Species</p>
<p>Leah has several hundred data files, each of which is formatted like this:</p>
<div class="highlight-source notranslate"><div class="highlight"><pre><span></span>2013-11-05,deer,5
2013-11-05,rabbit,22
2013-11-05,raccoon,7
2013-11-06,rabbit,19
2013-11-06,deer,2
2013-11-06,fox,1
2013-11-07,rabbit,18
2013-11-07,bear,1
</pre></div>
</div>
<p>An example of this type of file is given in
<code class="docutils literal notranslate"><span class="pre">shell-lesson-data/exercise-data/animal-counts/animals.csv</span></code>.</p>
<p>We can use the command <code class="docutils literal notranslate"><span class="pre">cut</span> <span class="pre">-d</span> <span class="pre">,</span> <span class="pre">-f</span> <span class="pre">2</span> <span class="pre">animals.csv</span> <span class="pre">|</span> <span class="pre">sort</span> <span class="pre">|</span> <span class="pre">uniq</span></code> to produce
the unique species in <code class="docutils literal notranslate"><span class="pre">animals.csv</span></code>.
In order to avoid having to type out this series of commands every time,
a scientist may choose to write a shell script instead.</p>
<p>Write a shell script called <code class="docutils literal notranslate"><span class="pre">species.sh</span></code> that takes any number of
filenames as command-line arguments and uses a variation of the above command
to print a list of the unique species appearing in each of those files separately.</p>
<div class="dropdown admonition">
<p class="admonition-title">Solution</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Script to find unique species in csv files where species is the second data field</span>
<span class="c1"># This script accepts any number of file names as command line arguments</span>

<span class="c1"># Loop over all files</span>
<span class="k">for</span> file <span class="k">in</span> <span class="nv">$@</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="s2">&quot;Unique species in </span><span class="nv">$file</span><span class="s2">:&quot;</span>
    <span class="c1"># Extract species names</span>
    cut -d , -f <span class="m">2</span> <span class="nv">$file</span> <span class="p">|</span> sort <span class="p">|</span> uniq
<span class="k">done</span>
</pre></div>
</div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">6. Executable script</p>
<p>Edit the <code class="docutils literal notranslate"><span class="pre">middle.sh</span></code> file to be as follows:</p>
<div class="highlight-source notranslate"><div class="highlight"><pre><span></span>#!/bin/bash
# Select lines from the middle of a file.
# Usage: bash middle.sh filename end_line num_lines
head -n &quot;$2&quot; &quot;$1&quot; | tail -n &quot;$3&quot;
</pre></div>
</div>
<p>To make shell file executable, we need to change the permission on the file</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chmod <span class="m">755</span> middle.sh
./middle.sh
</pre></div>
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./intro_linux"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="loop.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Loop</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="conclusion.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Workshop Conclusion</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Linh Ngo<br/>
  
    <div class="extra_footer">
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"></a> <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">University Research Computing Facility Workshops</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.
    </div>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>