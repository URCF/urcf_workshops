
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Pipes and Redirection &#8212; University Research Computing Facility Workshop</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Finding Things" href="06-find.html" />
    <link rel="prev" title="File Permissions and Atrributes" href="04a-file-permissions.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">University Research Computing Facility Workshop</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    University Research Computing Facility Workshops
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Introductory Sequence
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="00-index.html">
   Introduction to Linux
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="00a-outline.html">
     Workshop Outline
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="01-introduction.html">
     What is Linux?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="01a-shell.html">
     Shell Specifics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="02-accessing-picotte.html">
     Accessing the Picotte Cluster
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="03-file-system.html">
     Navigating Files and Directories
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04-working_with_files_and_directories.html">
     Working With Files and Directories
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04a-file-permissions.html">
     File Permissions and Atrributes
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Pipes and Redirection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="06-find.html">
     Finding Things
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="07-utilities.html">
     Utilities and Useful Information
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="08-conclusion.html">
     Workshop Conclusion
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../intro_picotte/00-index.html">
   Introduction to Research Computing on Picotte
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/01-introduction.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/02-accessing-picotte.html">
     Accessing the Palmetto Cluster
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/03-picotte_structure.html">
     The structure of the Palmetto Cluster
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/04-storage.html">
     Storage on Palmetto
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/05-interactive.html">
     Running an interactive job on Palmetto
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/06-file-transfer.html">
     Transferring files to and from Palmetto
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../intro_picotte/08-batch.html">
     Running a batch job
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  R
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../r_programming/00-index.html">
   Introduction to R
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/01-Introduction.html">
     Introduction to R
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/02-Basic-R.html">
     Basics of R
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/03-Data-Structures.html">
     Data Structures
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/04-Matrix.html">
     Vectors, Matrices, Lists and Data Frames
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/05-Control-Structure.html">
     Control Structure
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/06-Functions.html">
     Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/07-Parallel-Computing.html">
     Parallel Computing in R
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/08-Basic-Plotting.html">
     Basic plotting with R
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_programming/09-Plotting-with-ggplot.html">
     Ploting with ggplot
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Python
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../python_programming/00-index.html">
   Introduction to Python Programming
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/01-IntroToPython-I.html">
     Introduction to Python I
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/02-IntroToPython-II.html">
     Introduction to Python II
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/03-IntroToPython-III.html">
     Introduction to Python III
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../python_programming/04-IntroToPython-IV.html">
     Introduction to Python IV
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/intro_linux/05-pipes.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tools-designed-to-work-together">
   Tools designed to work together
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#nelle-s-pipeline-checking-files">
   Nelle’s Pipeline: Checking Files
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pipes">
   Pipes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#redirect-input-and-output">
   Redirect Input and Output
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Pipes and Redirection</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tools-designed-to-work-together">
   Tools designed to work together
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#nelle-s-pipeline-checking-files">
   Nelle’s Pipeline: Checking Files
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pipes">
   Pipes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#redirect-input-and-output">
   Redirect Input and Output
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="pipes-and-redirection">
<h1>Pipes and Redirection<a class="headerlink" href="#pipes-and-redirection" title="Permalink to this headline">#</a></h1>
<div class="dropdown admonition">
<p class="admonition-title">1. Overview</p>
<ul class="simple">
<li><p>Now that we know a few basic commands, we can finally look at the shell’s most
powerful feature: the ease with which it lets us combine existing programs in new ways.</p></li>
<li><p>We’ll start with the directory <code class="docutils literal notranslate"><span class="pre">shell-lesson-data/exercise-data/alkanes</span></code>
that contains six files describing some simple organic molecules.
The <code class="docutils literal notranslate"><span class="pre">.pdb</span></code> extension indicates that these files are in Protein Data Bank format,
a simple text format that specifies the type and position of each atom in the molecule.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/shell-lesson-data/exercise-data/alkanes
ls
</pre></div>
</div>
<ul class="simple">
<li><p>Let’s run an example command:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wc cubane.pdb
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">20  156 1158 cubane.pdb</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wc</span></code> is the ‘word count’ command: it counts the number of lines, words, and characters
in files (returning the values in that order from left to right).</p></li>
<li><p>If we run the command <code class="docutils literal notranslate"><span class="pre">wc</span> <span class="pre">*.pdb</span></code>, the <code class="docutils literal notranslate"><span class="pre">*</span></code> in <code class="docutils literal notranslate"><span class="pre">*.pdb</span></code> matches zero or more characters,
so the shell turns <code class="docutils literal notranslate"><span class="pre">*.pdb</span></code> into a list of all <code class="docutils literal notranslate"><span class="pre">.pdb</span></code> files in the current directory:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wc *.pdb
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">  20  156  1158  cubane.pdb</span>
<span class="go">  12  84   622   ethane.pdb</span>
<span class="go">   9  57   422   methane.pdb</span>
<span class="go">  30  246  1828  octane.pdb</span>
<span class="go">  21  165  1226  pentane.pdb</span>
<span class="go">  15  111  825   propane.pdb</span>
<span class="go"> 107  819  6081  total</span>
</pre></div>
</div>
<p>If we run <code class="docutils literal notranslate"><span class="pre">wc</span> <span class="pre">-l</span></code> instead of just <code class="docutils literal notranslate"><span class="pre">wc</span></code>, the output shows only the number of lines per file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ wc -l *.pdb
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">  20  cubane.pdb</span>
<span class="go">  12  ethane.pdb</span>
<span class="go">   9  methane.pdb</span>
<span class="go">  30  octane.pdb</span>
<span class="go">  21  pentane.pdb</span>
<span class="go">  15  propane.pdb</span>
<span class="go"> 107  total</span>
</pre></div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">2. Capturing output from commands</p>
<p>Which of these files contains the fewest lines?
It’s an easy question to answer when there are only six files,
but what if there were 6000?</p>
<p><strong>Redirection</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wc -l *.pdb &gt; lengths.txt
</pre></div>
</div>
<p>The greater than symbol, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, tells the shell to <strong>redirect</strong> the command’s output to a
file instead of printing it to the screen. This command prints no screen output, because
everything that <code class="docutils literal notranslate"><span class="pre">wc</span></code> would have printed has gone into the file <code class="docutils literal notranslate"><span class="pre">lengths.txt</span></code> instead.
If the file doesn’t exist prior to issuing the command, the shell will create the file.
If the file exists already, it will be silently overwritten, which may lead to data loss.
Thus, <strong>redirect</strong> commands require caution.</p>
<p><code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">lengths.txt</span></code> confirms that the file exists:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls lengths.txt
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">lengths.txt</span>
</pre></div>
</div>
<p>We can now send the content of <code class="docutils literal notranslate"><span class="pre">lengths.txt</span></code> to the screen using <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">lengths.txt</span></code>.
The <code class="docutils literal notranslate"><span class="pre">cat</span></code> command gets its name from ‘concatenate’ i.e. join together,
and it prints the contents of files one after another.
There’s only one file in this case,
so <code class="docutils literal notranslate"><span class="pre">cat</span></code> just shows us what it contains:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat lengths.txt
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">  20  cubane.pdb</span>
<span class="go">  12  ethane.pdb</span>
<span class="go">   9  methane.pdb</span>
<span class="go">  30  octane.pdb</span>
<span class="go">  21  pentane.pdb</span>
<span class="go">  15  propane.pdb</span>
<span class="go"> 107  total</span>
</pre></div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">3. Filtering output</p>
<p>Next we’ll use the <code class="docutils literal notranslate"><span class="pre">sort</span></code> command to sort the contents of the <code class="docutils literal notranslate"><span class="pre">lengths.txt</span></code> file.</p>
<div class="dropdown admonition">
<p class="admonition-title">What Does <code class="docutils literal notranslate"><span class="pre">sort</span> <span class="pre">-n</span></code> Do?</p>
<p>View the file <code class="docutils literal notranslate"><span class="pre">shell-lesson-data/exercise-data/numbers.txt</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/shell-lesson-data/exercise-data/
cat numbers.txt
</pre></div>
</div>
<p>Run <code class="docutils literal notranslate"><span class="pre">sort</span></code> and then <code class="docutils literal notranslate"><span class="pre">sort</span> <span class="pre">-n</span></code> on the file, then compare the outputs</p>
<p>If we run <code class="docutils literal notranslate"><span class="pre">sort</span></code> on this file, the output is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sort numbers.txt
sort -n numbers.txt
</pre></div>
</div>
</div>
<p>Running <code class="docutils literal notranslate"><span class="pre">sort</span></code> does <em>not</em> change the file; instead, it sends the sorted result to the screen:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sort -n lengths.txt
</pre></div>
</div>
<p>We can put the sorted list of lines in another temporary file
called <code class="docutils literal notranslate"><span class="pre">sorted-lengths.txt</span></code> by putting <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">sorted-lengths.txt</span></code>
after the command, just as we used <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">lengths.txt</span></code> to put the
output of <code class="docutils literal notranslate"><span class="pre">wc</span></code> into <code class="docutils literal notranslate"><span class="pre">lengths.txt</span></code>. Once we’ve done that, we can
run another command called <code class="docutils literal notranslate"><span class="pre">head</span></code> to get the first few lines in
<code class="docutils literal notranslate"><span class="pre">sorted-lengths.txt</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sort -n lengths.txt &gt; sorted-lengths.txt
head -n <span class="m">1</span> sorted-lengths.txt
</pre></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">-n</span> <span class="pre">1</span></code> with <code class="docutils literal notranslate"><span class="pre">head</span></code> tells it that we only want the first line
of the file; <code class="docutils literal notranslate"><span class="pre">-n</span> <span class="pre">20</span></code> would get the first 20, and so on.
Since <code class="docutils literal notranslate"><span class="pre">sorted-lengths.txt</span></code> contains the lengths of our files ordered
from least to greatest, the output of <code class="docutils literal notranslate"><span class="pre">head</span></code> must be the file with
the fewest lines.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">4. Appending to the same file</p>
<ul class="simple">
<li><p>We have seen the use of <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, but there is a similar operator <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code>
which works slightly differently.</p></li>
<li><p>We can use the <code class="docutils literal notranslate"><span class="pre">echo</span></code> command to print strings e.g.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span> The <span class="nb">echo</span> <span class="nb">command</span> prints text
</pre></div>
</div>
<p>Now test the commands below to reveal the difference between the two operators:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span> hello &gt; testfile01.txt
<span class="nb">echo</span> hello &gt; testfile01.txt
<span class="nb">echo</span> hello &gt;&gt; testfile02.txt
<span class="nb">echo</span> hello &gt;&gt; testfile02.txt
cat textfile01.txt
cat textfile02.txt
</pre></div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">5. Passing output to another command</p>
<p>In our example of finding the file with the fewest lines,
we are using two intermediate files <code class="docutils literal notranslate"><span class="pre">lengths.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">sorted-lengths.txt</span></code> to store output.
This is a confusing way to work because
even once you understand what <code class="docutils literal notranslate"><span class="pre">wc</span></code>, <code class="docutils literal notranslate"><span class="pre">sort</span></code>, and <code class="docutils literal notranslate"><span class="pre">head</span></code> do,
those intermediate files make it hard to follow what’s going on.
We can make it easier to understand by running <code class="docutils literal notranslate"><span class="pre">sort</span></code> and <code class="docutils literal notranslate"><span class="pre">head</span></code> together:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sort -n lengths.txt <span class="p">|</span> head -n <span class="m">1</span>
</pre></div>
</div>
<p>The vertical bar, <code class="docutils literal notranslate"><span class="pre">|</span></code>, between the two commands is called a <strong>pipe</strong>.
It tells the shell that we want to use
the output of the command on the left
as the input to the command on the right.</p>
<p>This has removed the need for the <code class="docutils literal notranslate"><span class="pre">sorted-lengths.txt</span></code> file.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">6. Combining multiple commands</p>
<p>Nothing prevents us from chaining pipes consecutively.
We can for example send the output of <code class="docutils literal notranslate"><span class="pre">wc</span></code> directly to <code class="docutils literal notranslate"><span class="pre">sort</span></code>,
and then send the resulting output to <code class="docutils literal notranslate"><span class="pre">head</span></code>.
This removes the need for any intermediate files.</p>
<p>We’ll start by using a pipe to send the output of <code class="docutils literal notranslate"><span class="pre">wc</span></code> to <code class="docutils literal notranslate"><span class="pre">sort</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wc -l *.pdb <span class="p">|</span> sort -n
</pre></div>
</div>
<p>We can then send that output through another pipe, to <code class="docutils literal notranslate"><span class="pre">head</span></code>, so that the full pipeline becomes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wc -l *.pdb <span class="p">|</span> sort -n <span class="p">|</span> head -n <span class="m">1</span>
</pre></div>
</div>
<p>This is exactly like a mathematician nesting functions like <em>log(3x)</em>
and saying ‘the log of three times <em>x</em>’.
In our case, the algorithm is ‘head of sort of line count of <code class="docutils literal notranslate"><span class="pre">*.pdb</span></code>’.</p>
<p>The redirection and pipes used in the last few commands are illustrated below:</p>
<p><img alt="Redirects and Pipes" src="../_images/redirects-and-pipes.svg" /></p>
</div>
<div class="highlight-challenge notranslate"><div class="highlight"><pre><span></span>
## Piping Commands Together

In our current directory, we want to find the 3 files which have the least number of
lines. Which command listed below would work?

1. `wc -l * &gt; sort -n &gt; head -n 3`
2. `wc -l * | sort -n | head -n 1-3`
3. `wc -l * | head -n 3 | sort -n`
4. `wc -l * | sort -n | head -n 3`

:::::::::::::::  solution

## Solution

Option 4 is the solution.
The pipe character `|` is used to connect the output from one command to
the input of another.
`&gt;` is used to redirect standard output to a file.
Try it in the `shell-lesson-data/exercise-data/alkanes` directory!



:::::::::::::::::::::::::

</pre></div>
</div>
<section id="tools-designed-to-work-together">
<h2>Tools designed to work together<a class="headerlink" href="#tools-designed-to-work-together" title="Permalink to this headline">#</a></h2>
<p>This idea of linking programs together is why Unix has been so successful.
Instead of creating enormous programs that try to do many different things,
Unix programmers focus on creating lots of simple tools that each do one job well,
and that work well with each other.
This programming model is called ‘pipes and filters’.
We’ve already seen pipes;
a <strong>filter</strong> is a program like <code class="docutils literal notranslate"><span class="pre">wc</span></code> or <code class="docutils literal notranslate"><span class="pre">sort</span></code>
that transforms a stream of input into a stream of output.
Almost all of the standard Unix tools can work this way.
Unless told to do otherwise,
they read from standard input,
do something with what they’ve read,
and write to standard output.</p>
<p>The key is that any program that reads lines of text from standard input
and writes lines of text to standard output
can be combined with every other program that behaves this way as well.
You can <em>and should</em> write your programs this way
so that you and other people can put those programs into pipes to multiply their power.</p>
<div class="highlight-challenge notranslate"><div class="highlight"><pre><span></span>
## Pipe Reading Comprehension

A file called `animals.csv` (in the `shell-lesson-data/exercise-data/animal-counts` folder)
contains the following data:

```source
2012-11-05,deer,5
2012-11-05,rabbit,22
2012-11-05,raccoon,7
2012-11-06,rabbit,19
2012-11-06,deer,2
2012-11-06,fox,4
2012-11-07,rabbit,16
2012-11-07,bear,1
```

What text passes through each of the pipes and the final redirect in the pipeline below?
Note, the `sort -r` command sorts in reverse order.

```bash
$ cat animals.csv | head -n 5 | tail -n 3 | sort -r &gt; final.txt
```

Hint: build the pipeline up one command at a time to test your understanding

:::::::::::::::  solution

## Solution

The `head` command extracts the first 5 lines from `animals.csv`.
Then, the last 3 lines are extracted from the previous 5 by using the `tail` command.
With the `sort -r` command those 3 lines are sorted in reverse order.
Finally, the output is redirected to a file: `final.txt`.
The content of this file can be checked by executing `cat final.txt`.
The file should contain the following lines:

```source
2012-11-06,rabbit,19
2012-11-06,deer,2
2012-11-05,raccoon,7
```

:::::::::::::::::::::::::

</pre></div>
</div>
<div class="highlight-challenge notranslate"><div class="highlight"><pre><span></span>
## Pipe Construction

For the file `animals.csv` from the previous exercise, consider the following command:

```bash
$ cut -d , -f 2 animals.csv
```

The `cut` command is used to remove or &#39;cut out&#39; certain sections of each line in the file,
and `cut` expects the lines to be separated into columns by a &lt;kbd&gt;Tab&lt;/kbd&gt; character.
A character used in this way is a called a **delimiter**.
In the example above we use the `-d` option to specify the comma as our delimiter character.
We have also used the `-f` option to specify that we want to extract the second field (column).
This gives the following output:

```output
deer
rabbit
raccoon
rabbit
deer
fox
rabbit
bear
```

The `uniq` command filters out adjacent matching lines in a file.
How could you extend this pipeline (using `uniq` and another command) to find
out what animals the file contains (without any duplicates in their
names)?

:::::::::::::::  solution

## Solution

```bash
$ cut -d , -f 2 animals.csv | sort | uniq
```

:::::::::::::::::::::::::

</pre></div>
</div>
<div class="highlight-challenge notranslate"><div class="highlight"><pre><span></span>
## Which Pipe?

The file `animals.csv` contains 8 lines of data formatted as follows:

```output
2012-11-05,deer,5
2012-11-05,rabbit,22
2012-11-05,raccoon,7
2012-11-06,rabbit,19
...
```

The `uniq` command has a `-c` option which gives a count of the
number of times a line occurs in its input.  Assuming your current
directory is `shell-lesson-data/exercise-data/animal-counts`,
what command would you use to produce a table that shows
the total count of each type of animal in the file?

1. `sort animals.csv | uniq -c`
2. `sort -t, -k2,2 animals.csv | uniq -c`
3. `cut -d, -f 2 animals.csv | uniq -c`
4. `cut -d, -f 2 animals.csv | sort | uniq -c`
5. `cut -d, -f 2 animals.csv | sort | uniq -c | wc -l`

:::::::::::::::  solution

## Solution

Option 4. is the correct answer.
If you have difficulty understanding why, try running the commands, or sub-sections of
the pipelines (make sure you are in the `shell-lesson-data/exercise-data/animal-counts`
directory).



:::::::::::::::::::::::::

</pre></div>
</div>
</section>
<section id="nelle-s-pipeline-checking-files">
<h2>Nelle’s Pipeline: Checking Files<a class="headerlink" href="#nelle-s-pipeline-checking-files" title="Permalink to this headline">#</a></h2>
<p>Nelle has run her samples through the assay machines
and created 17 files in the <code class="docutils literal notranslate"><span class="pre">north-pacific-gyre</span></code> directory described earlier.
As a quick check, starting from the <code class="docutils literal notranslate"><span class="pre">shell-lesson-data</span></code> directory, Nelle types:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> north-pacific-gyre
$ wc -l *.txt
</pre></div>
</div>
<p>The output is 18 lines that look like this:</p>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">300 NENE01729A.txt</span>
<span class="go">300 NENE01729B.txt</span>
<span class="go">300 NENE01736A.txt</span>
<span class="go">300 NENE01751A.txt</span>
<span class="go">300 NENE01751B.txt</span>
<span class="go">300 NENE01812A.txt</span>
<span class="go">... ...</span>
</pre></div>
</div>
<p>Now she types this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ wc -l *.txt <span class="p">|</span> sort -n <span class="p">|</span> head -n <span class="m">5</span>
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go"> 240 NENE02018B.txt</span>
<span class="go"> 300 NENE01729A.txt</span>
<span class="go"> 300 NENE01729B.txt</span>
<span class="go"> 300 NENE01736A.txt</span>
<span class="go"> 300 NENE01751A.txt</span>
</pre></div>
</div>
<p>Whoops: one of the files is 60 lines shorter than the others.
When she goes back and checks it,
she sees that she did that assay at 8:00 on a Monday morning — someone
was probably in using the machine on the weekend,
and she forgot to reset it.
Before re-running that sample,
she checks to see if any files have too much data:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ wc -l *.txt <span class="p">|</span> sort -n <span class="p">|</span> tail -n <span class="m">5</span>
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go"> 300 NENE02040B.txt</span>
<span class="go"> 300 NENE02040Z.txt</span>
<span class="go"> 300 NENE02043A.txt</span>
<span class="go"> 300 NENE02043B.txt</span>
<span class="go">5040 total</span>
</pre></div>
</div>
<p>Those numbers look good — but what’s that ‘Z’ doing there in the third-to-last line?
All of her samples should be marked ‘A’ or ‘B’;
by convention,
her lab uses ‘Z’ to indicate samples with missing information.
To find others like it, she does this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ls *Z.txt
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">NENE01971Z.txt    NENE02040Z.txt</span>
</pre></div>
</div>
<p>Sure enough,
when she checks the log on her laptop,
there’s no depth recorded for either of those samples.
Since it’s too late to get the information any other way,
she must exclude those two files from her analysis.
She could delete them using <code class="docutils literal notranslate"><span class="pre">rm</span></code>,
but there are actually some analyses she might do later where depth doesn’t matter,
so instead, she’ll have to be careful later on to select files using the wildcard expressions
<code class="docutils literal notranslate"><span class="pre">NENE*A.txt</span> <span class="pre">NENE*B.txt</span></code>.</p>
<div class="highlight-challenge notranslate"><div class="highlight"><pre><span></span>
## Removing Unneeded Files

Suppose you want to delete your processed data files, and only keep
your raw files and processing script to save storage.
The raw files end in `.dat` and the processed files end in `.txt`.
Which of the following would remove all the processed data files,
and *only* the processed data files?

1. `rm ?.txt`
2. `rm *.txt`
3. `rm * .txt`
4. `rm *.*`

:::::::::::::::  solution

## Solution

1. This would remove `.txt` files with one-character names
2. This is the correct answer
3. The shell would expand `*` to match everything in the current directory,
  so the command would try to remove all matched files and an additional
  file called `.txt`
4. The shell expands `*.*` to match all filenames containing at least one
  `.`, including the processed files (`.txt`) *and* raw files (`.dat`)
  
  

:::::::::::::::::::::::::

</pre></div>
</div>
<div class="highlight-keypoints notranslate"><div class="highlight"><pre><span></span>
- `wc` counts lines, words, and characters in its inputs.
- `cat` displays the contents of its inputs.
- `sort` sorts its inputs.
- `head` displays the first 10 lines of its input.
- `tail` displays the last 10 lines of its input.
- `command &gt; [file]` redirects a command&#39;s output to a file (overwriting any existing content).
- `command &gt;&gt; [file]` appends a command&#39;s output to a file.
- `[first] | [second]` is a pipeline: the output of the first command is used as the input to the second.
- The best way to use the shell is to use pipes to combine simple single-purpose programs (filters).

</pre></div>
</div>
</section>
<section id="pipes">
<h2>Pipes<a class="headerlink" href="#pipes" title="Permalink to this headline">#</a></h2>
<p><strong>Pipes</strong> are used to redirect output from one command into the input of another. When a command outputs text to the screen, that is called <strong>standard out</strong> (stdout). A pipe will redirect the standard output of a process to the <strong>standard in</strong> (stdin) of another program.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ls | wc -l
</pre></div>
</div>
<p>The above example pipes the output of <code class="docutils literal notranslate"><span class="pre">ls</span></code> to the input of <code class="docutils literal notranslate"><span class="pre">wc</span> <span class="pre">-l</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">wc</span></code> stands for <strong>w</strong>ord <strong>c</strong>ount and <code class="docutils literal notranslate"><span class="pre">-l</span></code> tells <code class="docutils literal notranslate"><span class="pre">wc</span></code> to count lines instead of characters. This command will output the number of files in the directory.</p>
</section>
<section id="redirect-input-and-output">
<h2>Redirect Input and Output<a class="headerlink" href="#redirect-input-and-output" title="Permalink to this headline">#</a></h2>
<p>A program’s output can be redirected to a file instead of stdout using <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ls &gt; list-of-files.txt
</pre></div>
</div>
<p>The content of a file can be sent as stdin to a program with <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ wc -l &lt; list-of-files.txt
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">&gt;</span></code> will overwrite the contents of an existing file. Use <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> to <strong>append</strong> to a file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ some-command &gt; logfile

$ other-command &gt;&gt; logfile
</pre></div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./intro_linux"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="04a-file-permissions.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">File Permissions and Atrributes</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="06-find.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Finding Things</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Linh Ngo<br/>
  
    <div class="extra_footer">
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"></a> <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">University Research Computing Facility Workshops</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.
    </div>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>